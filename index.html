<html>
    <head>
        <title>ArtQR Creator</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <link rel="stylesheet" href="./style.css">
  </head><body>
  <div id="settings-icon" onclick="toggleSettingsModal()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="3"></circle>
      <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
    </svg>
  </div>
  
  <div class="modal" id="settings-modal">
    <div class="modal-content">
      <span class="close" onclick="toggleSettingsModal()">&times;</span>
      <h2 id="settings-title">Settings</h2>
      <div class="settings-group">
        <label for="language-select" id="language-label">Language:</label>
        <select id="language-select" onchange="changeLanguage()">
          <option value="en">ğŸ‡ºğŸ‡¸ English</option>
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
          <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
          <option value="nl">ğŸ‡³ğŸ‡± Nederlands</option>
          <option value="pl">ğŸ‡µğŸ‡± Polski</option>
          <option value="sv">ğŸ‡¸ğŸ‡ª Svenska</option>
          <option value="da">ğŸ‡©ğŸ‡° Dansk</option>
          <option value="fi">ğŸ‡«ğŸ‡® Suomi</option>
          <option value="no">ğŸ‡³ğŸ‡´ Norsk</option>
          <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
          <option value="bn">ğŸ‡§ğŸ‡© à¦¬à¦¾à¦‚à¦²à¦¾</option>
          <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
          <option value="uk">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
          <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (ç®€ä½“)</option>
          <option value="zh-tw">ğŸ‡¹ğŸ‡¼ ä¸­æ–‡ (ç¹é«”)</option>
          <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
          <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
          <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="he">ğŸ‡®ğŸ‡± ×¢×‘×¨×™×ª</option>
          <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
          <option value="th">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</option>
          <option value="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
          <option value="id">ğŸ‡®ğŸ‡© Bahasa Indonesia</option>
          <option value="ms">ğŸ‡²ğŸ‡¾ Bahasa Melayu</option>
          <option value="fil">ğŸ‡µğŸ‡­ Filipino</option>
          <option value="el">ğŸ‡¬ğŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>
          <option value="ro">ğŸ‡·ğŸ‡´ RomÃ¢nÄƒ</option>
          <option value="hu">ğŸ‡­ğŸ‡º Magyar</option>
          <option value="cs">ğŸ‡¨ğŸ‡¿ ÄŒeÅ¡tina</option>
          <option value="sk">ğŸ‡¸ğŸ‡° SlovenÄina</option>
          <option value="bg">ğŸ‡§ğŸ‡¬ Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option>
          <option value="hr">ğŸ‡­ğŸ‡· Hrvatski</option>
          <option value="sr">ğŸ‡·ğŸ‡¸ Ğ¡Ñ€Ğ¿ÑĞºĞ¸</option>
          <option value="sl">ğŸ‡¸ğŸ‡® SlovenÅ¡Äina</option>
        </select>
      </div>
      <div class="settings-group">
        <label for="theme-select" id="theme-label">Theme:</label>
        <select id="theme-select" onchange="changeTheme()">
          <option value="default">Default Theme</option>
          <option value="dark">Dark Theme</option>
          <option value="colorful">Colorful Theme</option>
        </select>
      </div>
    </div>
  </div>
  
  <div class="container">
      <h1 id="title">Artistic QR Code Creator</h1>
      
      <label for="qr-mode" id="mode-label">QR Code Mode:</label>
      <select id="qr-mode" onchange="updateQRMode()">
          <option value="normal">Normal QR Code</option>
          <option value="artistic">Artistic QR Code</option>
      </select>
      
      <label for="qr-type" id="type-label">QR Code Type:</label>
      <select id="qr-type" onchange="updateInputFields()">
          <option value="text">Text</option>
          <option value="url">URL</option>
          <option value="mecard">MeCard</option>
          <option value="wifi">WiFi</option>
          <option value="geo">Map</option>
      </select>
      
      <div id="input-fields">
      <label for="qr-content" id="content-label">Content:</label>
      <div class="input-group">
          <input type="text" id="qr-content" placeholder="Enter your content here">
          <button onclick="searchLocation()" aria-label="Search">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
          </button>
      </div>
  </div>
      
      <label for="qr-color" id="color-label">QR Code Color:</label>
      <input type="color" id="qr-color" value="#000000" disabled>
      
      <label for="qr-bg-color" id="bg-color-label">Background Color:</label>
      <input type="color" id="qr-bg-color" value="#ffffff" disabled>
      
      <button onclick="generateQR()" id="generate-btn">Show QR Data</button>
      
      <div id="qrcode"></div>
  </div>
  
  <script>
  let map, marker;
  
  const areaCodes = [
      {code: '+1', country: 'USA/Canada'},
      {code: '+44', country: 'UK'},
      {code: '+33', country: 'France'},
      {code: '+49', country: 'Germany'},
      {code: '+39', country: 'Italy'},
      {code: '+91', country: 'India'},
      {code: '+7', country: 'Russia'},
      {code: '+380', country: 'Ukraine'},
      {code: '+86', country: 'China'},
      {code: '+966', country: 'Saudi Arabia'},
      {code: '+55', country: 'Brazil'},
      {code: '+81', country: 'Japan'},
      {code: '+82', country: 'South Korea'},
      {code: '+34', country: 'Spain'},
      {code: '+61', country: 'Australia'},
      {code: '+52', country: 'Mexico'},
      {code: '+31', country: 'Netherlands'},
      {code: '+41', country: 'Switzerland'},
      {code: '+46', country: 'Sweden'},
      {code: '+47', country: 'Norway'},
      {code: '+45', country: 'Denmark'},
      {code: '+358', country: 'Finland'},
      {code: '+48', country: 'Poland'},
      {code: '+43', country: 'Austria'},
      {code: '+32', country: 'Belgium'},
      {code: '+351', country: 'Portugal'},
      {code: '+30', country: 'Greece'},
      {code: '+36', country: 'Hungary'},
      {code: '+420', country: 'Czech Republic'},
      {code: '+manual', country: 'Manual Input'}
  ];
  
  function getAreaCodeOptions() {
      return areaCodes.map(ac => `<option value="${ac.code}">${ac.code} (${ac.country})</option>`).join('');
  }
  
  let translations = {
      en: {
          title: "Artistic QR Code Creator",
          modeLabel: "QR Code Mode:",
          normalMode: "Normal QR Code",
          artisticMode: "Artistic QR Code",
          typeLabel: "QR Code Type:",
          contentLabel: "Content:",
          colorLabel: "QR Code Color:",
          bgColorLabel: "Background Color:",
          generateBtn: "Show QR Data",
          textPlaceholder: "Enter your content here",
          urlPlaceholder: "Enter URL here",
          mecardName: "Name",
          mecardPhone: "Phone",
          mecardEmail: "Email",
          mecardAddress: "Address",
          wifiSSID: "SSID",
          wifiPassword: "Password",
          wifiEncryption: "Encryption Type",
          geoLatitude: "Latitude",
          geoLongitude: "Longitude",
          themeLabel: "Choose Theme:",
          defaultTheme: "Default Theme",
          darkTheme: "Dark Theme",
          colorfulTheme: "Colorful Theme",
          searchPlaceholder: "Search location",
          searchButton: "Search",
          settingsTitle: "Settings",
          languageLabel: "Language:"
      },
      es: {
          title: "Creador de CÃ³digos QR ArtÃ­sticos",
          modeLabel: "Modo de CÃ³digo QR:",
          normalMode: "CÃ³digo QR Normal",
          artisticMode: "CÃ³digo QR ArtÃ­stico",
          typeLabel: "Tipo de CÃ³digo QR:",
          contentLabel: "Contenido:",
          colorLabel: "Color del CÃ³digo QR:",
          bgColorLabel: "Color de Fondo:",
          generateBtn: "Mostrar Datos QR",
          textPlaceholder: "Ingrese su contenido aquÃ­",
          urlPlaceholder: "Ingrese la URL aquÃ­",
          mecardName: "Nombre",
          mecardPhone: "TelÃ©fono",
          mecardEmail: "Correo electrÃ³nico",
          mecardAddress: "DirecciÃ³n",
          wifiSSID: "SSID",
          wifiPassword: "ContraseÃ±a",
          wifiEncryption: "Tipo de encriptaciÃ³n",
          geoLatitude: "Latitud",
          geoLongitude: "Longitud",
          themeLabel: "Elegir Tema:",
          defaultTheme: "Tema Predeterminado",
          darkTheme: "Tema Oscuro",
          colorfulTheme: "Tema Colorido",
          searchPlaceholder: "Buscar ubicaciÃ³n",
          searchButton: "Buscar",
          settingsTitle: "Configuraciones",
          languageLabel: "Idioma:"
      },
      fr: {
          title: "CrÃ©ateur de Code QR Artistique",
          modeLabel: "Mode de Code QR :",
          normalMode: "Code QR Normal",
          artisticMode: "Code QR Artistique",
          typeLabel: "Type de Code QR :",
          contentLabel: "Contenu :",
          colorLabel: "Couleur du Code QR :",
          bgColorLabel: "Couleur de Fond :",
          generateBtn: "Afficher les donnÃ©es QR",
          textPlaceholder: "Entrez votre contenu ici",
          urlPlaceholder: "Entrez l'URL ici",
          mecardName: "Nom",
          mecardPhone: "TÃ©lÃ©phone",
          mecardEmail: "Email",
          mecardAddress: "Adresse",
          wifiSSID: "SSID",
          wifiPassword: "Mot de passe",
          wifiEncryption: "Type de chiffrement",
          geoLatitude: "Latitude",
          geoLongitude: "Longitude",
          themeLabel: "Choisir le ThÃ¨me :",
          defaultTheme: "ThÃ¨me par DÃ©faut",
          darkTheme: "ThÃ¨me Sombre",
          colorfulTheme: "ThÃ¨me ColorÃ©",
          searchPlaceholder: "Rechercher un emplacement",
          searchButton: "Recherche",
          settingsTitle: "RÃ©glages",
          languageLabel: "Langue :"
      },
      de: {
          title: "KÃ¼nstlerischer QR-Code-Generator",
          modeLabel: "QR-Code-Modus:",
          normalMode: "Normaler QR-Code",
          artisticMode: "KÃ¼nstlerischer QR-Code",
          typeLabel: "QR-Code-Typ:",
          contentLabel: "Inhalt:",
          colorLabel: "QR-Code-Farbe:",
          bgColorLabel: "Hintergrundfarbe:",
          generateBtn: "QR-Daten anzeigen",
          textPlaceholder: "Geben Sie hier Ihren Inhalt ein",
          urlPlaceholder: "Geben Sie hier die URL ein",
          mecardName: "Name",
          mecardPhone: "Telefon",
          mecardEmail: "E-Mail",
          mecardAddress: "Adresse",
          wifiSSID: "SSID",
          wifiPassword: "Passwort",
          wifiEncryption: "VerschlÃ¼sselungstyp",
          geoLatitude: "Breitengrad",
          geoLongitude: "LÃ¤ngengrad",
          themeLabel: "Thema WÃ¤hlen:",
          defaultTheme: "Standard Theme",
          darkTheme: "Dunkles Thema",
          colorfulTheme: "Buntes Thema",
          searchPlaceholder: "Standort suchen",
          searchButton: "Suche",
          settingsTitle: "Einstellungen",
          languageLabel: "Sprache:"
      },
      it: {
          title: "Creatore di Codici QR Artistici",
          modeLabel: "ModalitÃ  Codice QR:",
          normalMode: "Codice QR Normale",
          artisticMode: "Codice QR Artistico",
          typeLabel: "Tipo di Codice QR:",
          contentLabel: "Contenuto:",
          colorLabel: "Colore del Codice QR:",
          bgColorLabel: "Colore di Sfondo:",
          generateBtn: "Mostra Dati QR",
          textPlaceholder: "Inserisci il tuo contenuto qui",
          urlPlaceholder: "Inserisci l'URL qui",
          mecardName: "Nome",
          mecardPhone: "Telefono",
          mecardEmail: "Email",
          mecardAddress: "Indirizzo",
          wifiSSID: "SSID",
          wifiPassword: "Password",
          wifiEncryption: "Tipo di crittografia",
          geoLatitude: "Latitudine",
          geoLongitude: "Longitudine",
          themeLabel: "Scegli Tema:",
          defaultTheme: "Tema Predefinito",
          darkTheme: "Tema Scuro",
          colorfulTheme: "Tema Colorato",
          searchPlaceholder: "Cerca posizione",
          searchButton: "Cerca",
          settingsTitle: "Impostazioni",
          languageLabel: "Lingua:"
      },
      hi: {
          title: "à¤•à¤²à¤¾à¤¤à¥à¤®à¤• QR à¤•à¥‹à¤¡ à¤¨à¤¿à¤°à¥à¤®à¤¾à¤¤à¤¾",
          modeLabel: "QR à¤•à¥‹à¤¡ à¤®à¥‹à¤¡:",
          normalMode: "à¤¨à¥‰à¤°à¥à¤®à¤² QR à¤•à¥‹à¤¡",
          artisticMode: "à¤•à¤²à¤¾à¤¤à¥à¤®à¤• QR à¤•à¥‹à¤¡",
          typeLabel: "QR à¤•à¥‹à¤¡ à¤ªà¥à¤°à¤•à¤¾à¤°:",
          contentLabel: "à¤¸à¤¾à¤®à¤—à¥à¤°à¥€:",
          colorLabel: "QR à¤•à¥‹à¤¡ à¤°à¤‚à¤—:",
          bgColorLabel: "à¤ªà¥ƒà¤·à¥à¤ à¤­à¥‚à¤®à¤¿ à¤°à¤‚à¤—:",
          generateBtn: "QR à¤¡à¥‡à¤Ÿà¤¾ à¤¦à¤¿à¤–à¤¾à¤à¤",
          textPlaceholder: "à¤…à¤ªà¤¨à¥€ à¤¸à¤¾à¤®à¤—à¥à¤°à¥€ à¤¯à¤¹à¤¾à¤‚ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",
          urlPlaceholder: "URL à¤¯à¤¹à¤¾à¤‚ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",
          mecardName: "à¤¨à¤¾à¤®",
          mecardPhone: "à¤«à¥‹à¤¨",
          mecardEmail: "à¤ˆà¤®à¥‡à¤²",
          mecardAddress: "à¤ªà¤¤à¤¾",
          wifiSSID: "SSID",
          wifiPassword: "à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡",
          wifiEncryption: "à¤à¤¨à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤¶à¤¨ à¤ªà¥à¤°à¤•à¤¾à¤°",
          geoLatitude: "à¤…à¤•à¥à¤·à¤¾à¤‚à¤¶",
          geoLongitude: "à¤¦à¥‡à¤¶à¤¾à¤‚à¤¤à¤°",
          themeLabel: "à¤¥à¥€à¤® à¤šà¥à¤¨à¥‡à¤‚:",
          defaultTheme: "à¤¡à¤¿à¤«à¤¼à¥‰à¤²à¥à¤Ÿ à¤¥à¥€à¤®",
          darkTheme: "à¤¡à¤¾à¤°à¥à¤• à¤¥à¥€à¤®",
          colorfulTheme: "à¤°à¤‚à¤—à¥€à¤¨ à¤¥à¥€à¤®",
          searchPlaceholder: "à¤¸à¥à¤¥à¤¾à¤¨ à¤–à¥‹à¤œà¥‡à¤‚",
          searchButton: "à¤–à¥‹à¤œà¥‡à¤‚",
          settingsTitle: "à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸",
          languageLabel: "à¤­à¤¾à¤·à¤¾:"
      },
      ru: {
          title: "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ Ñ…ÑƒĞ´Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… QR-ĞºĞ¾Ğ´Ğ¾Ğ²",
          modeLabel: "Ğ ĞµĞ¶Ğ¸Ğ¼ QR-ĞºĞ¾Ğ´Ğ°:",
          normalMode: "ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ QR-ĞºĞ¾Ğ´",
          artisticMode: "Ğ¥ÑƒĞ´Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ QR-ĞºĞ¾Ğ´",
          typeLabel: "Ğ¢Ğ¸Ğ¿ QR-ĞºĞ¾Ğ´Ğ°:",
          contentLabel: "Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ:",
          colorLabel: "Ğ¦Ğ²ĞµÑ‚ QR-ĞºĞ¾Ğ´Ğ°:",
          bgColorLabel: "Ğ¦Ğ²ĞµÑ‚ Ñ„Ğ¾Ğ½Ğ°:",
          generateBtn: "ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ QR",
          textPlaceholder: "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ Ñ‚ĞµĞºÑÑ‚ Ğ·Ğ´ĞµÑÑŒ",
          urlPlaceholder: "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ URL Ğ·Ğ´ĞµÑÑŒ",
          mecardName: "Ğ˜Ğ¼Ñ",
          mecardPhone: "Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½",
          mecardEmail: "Email",
          mecardAddress: "ĞĞ´Ñ€ĞµÑ",
          wifiSSID: "SSID",
          wifiPassword: "ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ",
          wifiEncryption: "Ğ¢Ğ¸Ğ¿ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ",
          geoLatitude: "Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ°",
          geoLongitude: "Ğ”Ğ¾Ğ»Ğ³Ğ¾Ñ‚Ğ°",
          themeLabel: "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ‚ĞµĞ¼Ñƒ:",
          defaultTheme: "Ğ¢ĞµĞ¼Ğ° Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ",
          darkTheme: "Ğ¢ĞµĞ¼Ğ½Ğ°Ñ Ñ‚ĞµĞ¼Ğ°",
          colorfulTheme: "Ğ¯Ñ€ĞºĞ°Ñ Ñ‚ĞµĞ¼Ğ°",
          searchPlaceholder: "ĞŸĞ¾Ğ¸ÑĞº Ğ¼ĞµÑÑ‚Ğ°",
          searchButton: "ĞŸĞ¾Ğ¸ÑĞº",
          settingsTitle: "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸",
          languageLabel: "Ğ¯Ğ·Ñ‹Ğº:"
      },
      uk: {
          title: "Ğ¢Ğ²Ğ¾Ñ€ĞµÑ†ÑŒ Ñ…ÑƒĞ´Ğ¾Ğ¶Ğ½Ñ–Ñ… QR-ĞºĞ¾Ğ´Ñ–Ğ²",
          modeLabel: "Ğ ĞµĞ¶Ğ¸Ğ¼ QR-ĞºĞ¾Ğ´Ñƒ:",
          normalMode: "Ğ—Ğ²Ğ¸Ñ‡Ğ°Ğ¹Ğ½Ğ¸Ğ¹ QR-ĞºĞ¾Ğ´",
          artisticMode: "Ğ¥ÑƒĞ´Ğ¾Ğ¶Ğ½Ñ–Ğ¹ QR-ĞºĞ¾Ğ´",
          typeLabel: "Ğ¢Ğ¸Ğ¿ QR-ĞºĞ¾Ğ´Ñƒ:",
          contentLabel: "Ğ’Ğ¼Ñ–ÑÑ‚:",
          colorLabel: "ĞšĞ¾Ğ»Ñ–Ñ€ QR-ĞºĞ¾Ğ´Ñƒ:",
          bgColorLabel: "ĞšĞ¾Ğ»Ñ–Ñ€ Ñ„Ğ¾Ğ½Ñƒ:",
          generateBtn: "ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚Ğ¸ Ğ´Ğ°Ğ½Ñ– QR",
          textPlaceholder: "Ğ’Ğ²ĞµĞ´Ñ–Ñ‚ÑŒ Ğ²Ğ°Ñˆ Ñ‚ĞµĞºÑÑ‚ Ñ‚ÑƒÑ‚",
          urlPlaceholder: "Ğ’Ğ²ĞµĞ´Ñ–Ñ‚ÑŒ URL Ñ‚ÑƒÑ‚",
          mecardName: "Ğ†Ğ¼'Ñ",
          mecardPhone: "Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½",
          mecardEmail: "Email",
          mecardAddress: "ĞĞ´Ñ€ĞµÑĞ°",
          wifiSSID: "SSID",
          wifiPassword: "ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ",
          wifiEncryption: "Ğ¢Ğ¸Ğ¿ ÑˆĞ¸Ñ„Ñ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ",
          geoLatitude: "Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ°",
          geoLongitude: "Ğ”Ğ¾Ğ²Ğ³Ğ¾Ñ‚Ğ°",
          themeLabel: "ĞĞ±ĞµÑ€Ñ–Ñ‚ÑŒ Ñ‚ĞµĞ¼Ñƒ:",
          defaultTheme: "Ğ¢ĞµĞ¼Ğ° Ğ·Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼",
          darkTheme: "Ğ¢ĞµĞ¼Ğ½Ğ° Ñ‚ĞµĞ¼Ğ°",
          colorfulTheme: "Ğ¯ÑĞºÑ€Ğ°Ğ²Ğ° Ñ‚ĞµĞ¼Ğ°",
          searchPlaceholder: "ĞŸĞ¾ÑˆÑƒĞº Ğ¼Ñ–ÑÑ†Ñ",
          searchButton: "ĞŸĞ¾ÑˆÑƒĞº",
          settingsTitle: "ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ",
          languageLabel: "ĞœĞ¾Ğ²Ğ°:"
      },
      zh: {
          title: "è‰ºæœ¯äºŒç»´ç ç”Ÿæˆå™¨",
          modeLabel: "äºŒç»´ç æ¨¡å¼ï¼š",
          normalMode: "æ™®é€šäºŒç»´ç ",
          artisticMode: "è‰ºæœ¯äºŒç»´ç ",
          typeLabel: "äºŒç»´ç ç±»å‹ï¼š",
          contentLabel: "å†…å®¹ï¼š",
          colorLabel: "äºŒç»´ç é¢œè‰²ï¼š",
          bgColorLabel: "èƒŒæ™¯é¢œè‰²ï¼š",
          generateBtn: "æ˜¾ç¤ºäºŒç»´ç æ•°æ®",
          textPlaceholder: "åœ¨æ­¤è¾“å…¥æ‚¨çš„å†…å®¹",
          urlPlaceholder: "åœ¨æ­¤è¾“å…¥URL",
          mecardName: "å§“å",
          mecardPhone: "ç”µè¯",
          mecardEmail: "ç”µå­é‚®ä»¶",
          mecardAddress: "åœ°å€",
          wifiSSID: "SSID",
          wifiPassword: "å¯†ç ",
          wifiEncryption: "åŠ å¯†ç±»å‹",
          geoLatitude: "çº¬åº¦",
          geoLongitude: "ç»åº¦",
          themeLabel: "é€‰æ‹©ä¸»é¢˜ï¼š",
          defaultTheme: "é»˜è®¤ä¸»é¢˜",
          darkTheme: "é»‘æš—ä¸»é¢˜",
          colorfulTheme: "äº”å½©ç¼¤çº·çš„ä¸»é¢˜",
          searchPlaceholder: "æœç´¢ä½ç½®",
          searchButton: "æœç´¢",
          settingsTitle: "è®¾ç½®",
          languageLabel: "è¯­è¨€ï¼š"
      },
      ar: {
          title: "Ù…Ù†Ø´Ø¦ Ø±Ù…Ø² QR Ø§Ù„ÙÙ†ÙŠ",
          modeLabel: "ÙˆØ¶Ø¹ Ø±Ù…Ø² QR:",
          normalMode: "Ø±Ù…Ø² QR Ø§Ù„Ø¹Ø§Ø¯ÙŠ",
          artisticMode: "Ø±Ù…Ø² QR Ø§Ù„ÙÙ†ÙŠ",
          typeLabel: "Ù†ÙˆØ¹ Ø±Ù…Ø² QR:",
          contentLabel: "Ø§Ù„Ù…Ø­ØªÙˆÙ‰:",
          colorLabel: "Ù„ÙˆÙ† Ø±Ù…Ø² QR:",
          bgColorLabel: "Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©:",
          generateBtn: "Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª QR",
          textPlaceholder: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù‡Ù†Ø§",
          urlPlaceholder: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§",
          mecardName: "Ø§Ù„Ø§Ø³Ù…",
          mecardPhone: "Ø§Ù„Ù‡Ø§ØªÙ",
          mecardEmail: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
          mecardAddress: "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",
          wifiSSID: "SSID",
          wifiPassword: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
          wifiEncryption: "Ù†ÙˆØ¹ Ø§Ù„ØªØ´ÙÙŠØ±",
          geoLatitude: "Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶",
          geoLongitude: "Ø®Ø· Ø§Ù„Ø·ÙˆÙ„",
          themeLabel: "Ø§Ø®ØªØ± Ø§Ù„Ø³Ù…Ø©:",
          defaultTheme: "Ø§Ù„Ù†Ø³Ù‚ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ",
          darkTheme: "Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø¯Ø§ÙƒÙ†Ø©",
          colorfulTheme: "Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ù…Ù„ÙˆÙ†Ø©",
          searchPlaceholder: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹",
          searchButton: "Ø¨Ø­Ø«",
          settingsTitle: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
          languageLabel: "Ø§Ù„Ù„ØºØ©:"
      },
      pt: {
          title: "Criador de CÃ³digo QR ArtÃ­stico",
          modeLabel: "Modo de CÃ³digo QR:",
          normalMode: "CÃ³digo QR Normal",
          artisticMode: "CÃ³digo QR ArtÃ­stico",
          typeLabel: "Tipo de CÃ³digo QR:",
          contentLabel: "ConteÃºdo:",
          colorLabel: "Cor do CÃ³digo QR:",
          bgColorLabel: "Cor de Fundo:",
          generateBtn: "Mostrar Dados QR",
          textPlaceholder: "Insira seu conteÃºdo aqui",
          urlPlaceholder: "Insira a URL aqui",
          mecardName: "Nome",
          mecardPhone: "Telefone",
          mecardEmail: "Email",
          mecardAddress: "EndereÃ§o",
          wifiSSID: "SSID",
          wifiPassword: "Senha",
          wifiEncryption: "Tipo de Criptografia",
          geoLatitude: "Latitude",
          geoLongitude: "Longitude",
          themeLabel: "Escolha o Tema:",
          defaultTheme: "Tema PadrÃ£o",
          darkTheme: "Tema Escuro",
          colorfulTheme: "Tema Colorido",
          searchPlaceholder: "Pesquisar localizaÃ§Ã£o",
          searchButton: "Pesquisar",
          settingsTitle: "ConfiguraÃ§Ãµes",
          languageLabel: "Idioma:"
      },
      nl: {
          title: "Artistieke QR-code Creator",
          modeLabel: "QR-code Modus:",
          normalMode: "Normale QR-code",
          artisticMode: "Artistieke QR-code",
          typeLabel: "QR-code Type:",
          contentLabel: "Inhoud:",
          colorLabel: "QR-code Kleur:",
          bgColorLabel: "Achtergrondkleur:",
          generateBtn: "Toon QR-gegevens",
          textPlaceholder: "Voer hier uw inhoud in",
          urlPlaceholder: "Voer hier de URL in",
          mecardName: "Naam",
          mecardPhone: "Telefoon",
          mecardEmail: "E-mail",
          mecardAddress: "Adres",
          wifiSSID: "SSID",
          wifiPassword: "Wachtwoord",
          wifiEncryption: "Versleutelingstype",
          geoLatitude: "Breedtegraad",
          geoLongitude: "Lengtegraad",
          themeLabel: "Kies Thema:",
          defaultTheme: "Standaard Thema",
          darkTheme: "Donker Thema",
          colorfulTheme: "Kleurrijk Thema",
          searchPlaceholder: "Zoek locatie",
          searchButton: "Zoeken",
          settingsTitle: "Instellingen",
          languageLabel: "Taal:"
      },
  };
  
  function changeLanguage() {
      let lang = document.getElementById('language-select').value;
      let t = translations[lang] || translations['en'];
      
      document.getElementById('title').textContent = t.title;
      document.getElementById('mode-label').textContent = t.modeLabel || "QR Code Mode:";
      document.getElementById('type-label').textContent = t.typeLabel || "QR Code Type:";
      document.getElementById('color-label').textContent = t.colorLabel || "QR Code Color:";
      document.getElementById('bg-color-label').textContent = t.bgColorLabel || "Background Color:";
      document.getElementById('generate-btn').textContent = t.generateBtn || "Show QR Data";
  
      document.getElementById('settings-title').textContent = t.settingsTitle || "Settings";
      document.getElementById('language-label').textContent = t.languageLabel || "Language:";
      document.getElementById('theme-label').textContent = t.themeLabel || "Theme:";
      
      let modeSelect = document.getElementById('qr-mode');
      modeSelect.options[0].text = t.normalMode || "Normal QR Code";
      modeSelect.options[1].text = t.artisticMode || "Artistic QR Code";
  
      let themeSelect = document.getElementById('theme-select');
      themeSelect.options[0].text = t.defaultTheme || "Default Theme";
      themeSelect.options[1].text = t.darkTheme || "Dark Theme";
      themeSelect.options[2].text = t.colorfulTheme || "Colorful Theme";
  
      updateInputFields();

      console.log(lang);
      localStorage.setItem('language-select', lang)
  }
  
  function updateQRMode() {
      let mode = document.getElementById('qr-mode').value;
      let colorInputs = document.querySelectorAll('#qr-color, #qr-bg-color');
      
      if (mode === 'artistic') {
          colorInputs.forEach(input => input.removeAttribute('disabled'));
      } else {
          colorInputs.forEach(input => input.setAttribute('disabled', 'disabled'));
      }
  }
  
  function changeTheme() {
      let theme = document.getElementById('theme-select').value;
      document.body.className = theme === 'default' ? '' : `${theme}-theme`;

      console.log(theme);
      localStorage.setItem('theme-select', `${theme}-theme`);
  }
  
  function initMap() {
      map = L.map('map-container').setView([0, 0], 2);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: 'Â© OpenStreetMap contributors'
      }).addTo(map);
  
      map.on('click', function(e) {
          setMarker(e.latlng);
      });
  
      marker = L.marker([0, 0]);
  }
  
  function setMarker(latlng) {
      if (!marker._map) {
          marker.addTo(map);
      }
      marker.setLatLng(latlng);
      document.getElementById('geo-latitude').value = latlng.lat.toFixed(6);
      document.getElementById('geo-longitude').value = latlng.lng.toFixed(6);
  }
  
  function searchLocation() {
      const query = document.getElementById('location-search').value;
      if (!query) return;
  
      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`)
          .then(response => response.json())
          .then(data => {
              if (data && data.length > 0) {
                  const result = data[0];
                  const lat = parseFloat(result.lat);
                  const lon = parseFloat(result.lon);
                  map.setView([lat, lon], 13);
                  setMarker(L.latLng(lat, lon));
              } else {
                  alert('Location not found');
              }
          })
          .catch(error => {
              console.error('Error:', error);
              alert('An error occurred while searching for the location');
          });
  }
  
  function updateInputFields() {
      let type = document.getElementById('qr-type').value;
      let lang = document.getElementById('language-select').value;
      let t = translations[lang];
      let inputFields = document.getElementById('input-fields');
      
      inputFields.innerHTML = '';
      
      switch(type) {
          case 'text':
          case 'url':
              inputFields.innerHTML = `
                  <label for="qr-content" id="content-label">${t.contentLabel}</label>
                  <input type="text" id="qr-content" placeholder="${type === 'url' ? t.urlPlaceholder : t.textPlaceholder}">
              `;
              break;
          case 'mecard':
              inputFields.innerHTML = `
                  <div class="input-group">
                      <input type="text" id="mecard-name" placeholder="${t.mecardName}">
                  </div>
                  <div class="input-group">
                      <select id="mecard-phone-areacode" onchange="handleManualAreaCode(this)">
                          ${getAreaCodeOptions()}
                      </select>
                      <input type="text" id="mecard-phone" placeholder="${t.mecardPhone}">
                      <button onclick="addInput('mecard-phone')">+</button>
                  </div>
                  <div class="input-group">
                      <input type="text" id="mecard-email" placeholder="${t.mecardEmail}">
                      <button onclick="addInput('mecard-email')">+</button>
                  </div>
                  <div class="input-group">
                      <input type="text" id="mecard-address" placeholder="${t.mecardAddress}">
                  </div>
              `;
              break;
          case 'wifi':
              inputFields.innerHTML = `
                  <div class="input-group">
                      <input type="text" id="wifi-ssid" placeholder="${t.wifiSSID}">
                  </div>
                  <div class="input-group">
                      <input type="text" id="wifi-password" placeholder="${t.wifiPassword}">
                  </div>
                  <div class="input-group">
                      <input type="text" id="wifi-encryption" placeholder="${t.wifiEncryption}">
                  </div>
              `;
              break;
          case 'geo':
              inputFields.innerHTML = `
                  <div id="map-container" style="height: 300px; margin-bottom: 10px;"></div>
                  <div class="input-group">
                      <input type="text" id="geo-latitude" placeholder="${t.geoLatitude}">
                  </div>
                  <div class="input-group">
                      <input type="text" id="geo-longitude" placeholder="${t.geoLongitude}">
                  </div>
                  <div class="input-group">
                      <input type="text" id="location-search" placeholder="${t.searchPlaceholder}">
                      <button onclick="searchLocation()">${t.searchButton}</button>
                  </div>
              `;
              requestAnimationFrame(() => {
                  initMap();
              });
              break;
      }
  }
  
  function handleManualAreaCode(select) {
      if (select.value === '+manual') {
          let manualInput = document.createElement('input');
          manualInput.type = 'text';
          manualInput.placeholder = 'Enter area code';
          manualInput.className = 'manual-area-code';
          select.parentNode.insertBefore(manualInput, select.nextSibling);
      } else {
          let manualInput = select.nextSibling;
          if (manualInput && manualInput.className === 'manual-area-code') {
              manualInput.remove();
          }
      }
  }
  
  function addInput(baseId) {
      let inputGroup = document.querySelector(`#${baseId}`).closest('.input-group');
      let newInput = document.createElement('div');
      newInput.className = 'input-group';
      if (baseId === 'mecard-phone') {
          newInput.innerHTML = `
              <select id="${baseId}-areacode-${Date.now()}" onchange="handleManualAreaCode(this)">
                  ${getAreaCodeOptions()}
              </select>
              <input type="text" id="${baseId}-${Date.now()}" placeholder="${inputGroup.querySelector('input').placeholder}">
              <button onclick="removeInput(this)">-</button>
          `;
      } else {
          newInput.innerHTML = `
              <input type="text" id="${baseId}-${Date.now()}" placeholder="${inputGroup.querySelector('input').placeholder}">
              <button onclick="removeInput(this)">-</button>
          `;
      }
      inputGroup.parentNode.insertBefore(newInput, inputGroup.nextSibling);
  }
  
  function SendData(data) {
    window.Telegram.WebApp.sendData(JSON.stringify(data));
}
  
  function generateQR() {
      let type = document.getElementById('qr-type').value;
      let mode = document.getElementById('qr-mode').value;
      let color = mode === 'artistic' ? document.getElementById('qr-color').value : '#000000';
      let bgColor = mode === 'artistic' ? document.getElementById('qr-bg-color').value : '#ffffff';
      
      let data = {
          type: type,
          mode: mode,
          color: color,
          bgColor: bgColor
      };
      
      switch(type) {
          case 'text':
          case 'url':
              data.content = document.getElementById('qr-content')?.value || '';
              break;
          case 'mecard':
              data.name = document.getElementById('mecard-name')?.value || '';
              data.phones = Array.from(document.querySelectorAll('[id^="mecard-phone"]')).map(input => {
                  let areaCodeSelect = input.previousElementSibling;
                  let areaCode = areaCodeSelect.value;
                  if (areaCode === '+manual') {
                      let manualInput = areaCodeSelect.nextSibling;
                      areaCode = manualInput && manualInput.className === 'manual-area-code' ? manualInput.value : '';
                  }
                  return `${areaCode}${input.value || ''}`;
              }).filter(Boolean);
              data.emails = Array.from(document.querySelectorAll('[id^="mecard-email"]')).map(input => input.value || '').filter(Boolean);
              data.address = document.getElementById('mecard-address')?.value || '';
              break;
          case 'wifi':
              data.ssid = document.getElementById('wifi-ssid')?.value || '';
              data.password = document.getElementById('wifi-password')?.value || '';
              data.encryption = document.getElementById('wifi-encryption')?.value || '';
              break;
          case 'geo':
              if (marker && marker.getLatLng) {
                  let latlng = marker.getLatLng();
                  data.latitude = latlng.lat.toFixed(6);
                  data.longitude = latlng.lng.toFixed(6);
              }
              break;
      }
      
      SendData(data);
  }
  
  function toggleSettingsModal() {
      var modal = document.getElementById("settings-modal");
      if (modal.style.display === "block") {
          modal.style.display = "none";
      } else {
          modal.style.display = "block";
      }
  }

  function applySavedSettings() {
        const savedLanguage = localStorage.getItem('language-select');
        const savedTheme = localStorage.getItem('theme-select');
        console.log(savedLanguage, savedTheme);

        if (savedLanguage) {
            document.getElementById('language-select').value = savedLanguage;
            changeLanguage();
        }

        if (savedTheme) {
            document.getElementById('theme-select').value = savedTheme.replace('-theme', '');
            changeTheme();
        }
    }
    document.addEventListener('DOMContentLoaded', (event) => {
        applySavedSettings();
    });
  
//   changeLanguage();
//   changeTheme();
  updateInputFields();
  updateQRMode();
  </script>
  </body></html>